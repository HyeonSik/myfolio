!function(){"use strict";function e(){$("html").find(".lightboxOverlay").remove(),$("html").find(".lightbox").remove()}function t(){var e;$(".template-nav-menu > .is-edit-mode").children().each(function(t,i){e=$(i),$("#toolbar_nav_title_container a:eq("+t+")").text(e.val()),e.blur(function(){$("#toolbar_nav_title_container a:eq("+t+")").text($(this).val())})})}function i(){$("#template_editor_modify_btn").click(function(){$(".is-view-mode").addClass("hide"),$(".is-edit-mode").removeClass("hide"),t()}),$("#template_editor_save_btn").click(function(){var t,i,a,n,o,r,l=$("body").data("portfolio");$(".edit-item-parent").each(function(e,o){t=$(o),i=t.parent().children(".view-item-parent"),t.children().each(function(e,t){a=$(t),n=i.children().eq(e),n.text(a.val())})}),$(".edit-item").each(function(e,t){a=$(t),n=a.parent().children(".view-item"),"INPUT"===a[0].tagName&&n.text(a.val()),"TEXTAREA"===a[0].tagName&&n.html(Util.makeTextareaValueToHtmlTag(a.val()))}),$(".edit-image-item").each(function(e,t){a=$(t),n=a.parent(),n.attr("data-image",a.attr("src"))}),$("#template_editor_save_btn").trigger("TEMPLATE_SAVE_EVENT"),$(".is-view-mode").removeClass("hide"),$(".is-edit-mode").addClass("hide"),e(),o=$("html").prop("outerHTML"),r={html:o},$.ajax({url:"/ajax/portfolio/save/"+l,type:"POST",data:r,error:function(){alert("Save fail! (Server error)")},success:function(e){return 1===e.code?void alert(e.msg):void 0}})}),$("#template_editor_cancel_btn").click(function(){location.reload(!0)})}function a(){i()}a()}();